DROP TABLE IF EXISTS shares;
DROP TABLE IF EXISTS sketches;
DROP TABLE IF EXISTS folders;
DROP TABLE IF EXISTS users;


-- Create tables

CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	name VARCHAR(100) UNIQUE,
	password VARCHAR(200),
	role NUMERIC(1)
);

CREATE TABLE folders (
	id SERIAL PRIMARY KEY,
	name VARCHAR(100),
	owner INT REFERENCES users(id)
);

CREATE TABLE sketches (
	id SERIAL PRIMARY KEY,
	name VARCHAR(100),
	folders_id INT REFERENCES folders(id),
	content TEXT
);

CREATE TABLE shares (
	users_id INT REFERENCES users(id),
	folders_id INT REFERENCES folders(id),
	PRIMARY KEY (users_id, folders_id)
);


-- Insert data

INSERT INTO users (name, password, role) VALUES 
('a', 'a', '0'), --1
('b', 'b', '0') --2
;


INSERT INTO folders (name, owner) VALUES
('Work', 1), --1
('Unfinished Projects', 1), --2
('My Sketches', 2) --2
;

INSERT INTO sketches (name, folders_id, content) VALUES 
('Animal study', 1, '{"lines":[[[361,387],[419,499],"black"],[[420,501],[468,541],"black"],[[465,540],[506,518],"black"],[[506,518],[531,383],"black"],[[531,383],[505,332],"black"],[[505,332],[448,315],"black"],[[448,315],[396,324],"black"],[[397,324],[363,389],"black"],[[394,334],[360,277],"black"],[[328,259],[360,279],"black"],[[328,260],[289,255],"black"],[[288,259],[324,273],"black"],[[324,277],[352,302],"black"],[[355,305],[383,352],"black"],[[487,328],[505,290],"black"],[[506,290],[535,258],"black"],[[535,258],[587,242],"black"],[[587,242],[563,265],"black"],[[531,285],[521,303],"black"],[[523,305],[507,338],"black"],[[532,290],[567,265],"black"],[[370,382],[259,352],"black"],[[259,352],[232,372],"black"],[[233,374],[261,405],"black"],[[262,405],[369,402],"black"],[[519,371],[611,302],"black"],[[611,302],[640,315],"black"],[[640,315],[642,349],"black"],[[642,349],[532,388],"black"],[[384,406],[403,399],"black"],[[403,399],[413,411],"black"],[[413,411],[411,411],"black"],[[387,408],[394,418],"black"],[[394,419],[414,411],"black"],[[486,400],[503,395],"black"],[[503,395],[514,404],"black"],[[514,404],[505,413],"black"],[[505,413],[490,401],"black"],[[443,507],[462,516],"black"],[[462,516],[491,506],"black"],[[442,477],[459,467],"black"],[[460,468],[480,470],"black"],[[480,470],[486,475],"black"],[[487,477],[482,491],"black"],[[482,491],[464,492],"black"],[[463,492],[443,480],"black"],[[451,479],[466,485],"black"],[[466,485],[481,482],"black"],[[466,487],[464,493],"black"],[[523,462],[716,475],"black"],[[716,475],[792,397],"black"],[[792,397],[905,392],"black"],[[905,392],[981,393],"black"],[[981,393],[1035,427],"black"],[[1036,427],[1065,468],"black"],[[1065,468],[1075,521],"black"],[[1075,521],[1017,556],"black"],[[1017,556],[943,579],"black"],[[944,580],[824,601],"black"],[[824,601],[768,589],"black"],[[765,588],[738,564],"black"],[[737,563],[722,536],"black"],[[722,536],[718,506],"black"],[[718,504],[718,480],"black"],[[718,480],[764,587],"black"],[[763,591],[624,723],"black"],[[766,593],[841,733],"black"],[[1004,567],[976,720],"black"],[[1009,564],[1142,708],"black"],[[624,722],[595,750],"black"],[[595,750],[636,759],"black"],[[636,759],[630,724],"black"],[[629,724],[619,753],"black"],[[839,733],[808,761],"black"],[[809,761],[843,762],"black"],[[843,762],[842,734],"black"],[[841,734],[826,761],"black"],[[977,721],[947,754],"black"],[[947,754],[992,754],"black"],[[992,754],[977,725],"black"],[[977,725],[971,756],"black"],[[1142,712],[1126,742],"black"],[[1126,742],[1161,742],"black"],[[1161,742],[1145,711],"black"],[[1144,714],[1146,744],"black"]]}'
), -- 1
('Flowers', 1, '{"lines":[[[772,482],[674,652],"black"],[[674,652],[776,842],"black"],[[777,843],[1019,861],"black"],[[1019,861],[1159,735],"black"],[[1159,734],[1079,538],"black"],[[781,496],[847,571],"black"],[[847,571],[939,584],"black"],[[939,584],[1084,547],"black"],[[1084,547],[1034,465],"black"],[[1034,465],[876,441],"black"],[[876,441],[784,497],"black"],[[844,530],[720,161],"black"],[[922,503],[962,255],"black"],[[1027,522],[1221,248],"black"],[[729,176],[645,95],"black"],[[645,95],[728,59],"black"],[[728,59],[787,152],"black"],[[795,163],[737,178],"black"],[[972,266],[893,185],"black"],[[893,185],[1075,66],"black"],[[1075,66],[1144,201],"black"],[[1144,201],[973,265],"black"],[[1220,269],[1149,47],"black"],[[1153,49],[1469,137],"black"],[[1469,137],[1216,267],"black"]]}'
) -- 2
;


SELECT * FROM sketches